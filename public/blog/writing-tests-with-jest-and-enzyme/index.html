

<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>seriousco.de - Writing tests with jest and enzyme</title>
    <meta name="generator" content="Hugo 0.17" />

    
    <meta name="description" content="Jest and enzyme - writing javascript tests made easy with a painless framework and a helpful utility library.">
    
    <link rel="canonical" href="https://seriousco.de/blog/writing-tests-with-jest-and-enzyme/">
    

    <meta property="og:url" content="https://seriousco.de/blog/writing-tests-with-jest-and-enzyme/">
    
    <meta property="og:title" content="Writing tests with jest and enzyme">
    
    
    <meta property="og:image" content="https://seriousco.de/images/blog4_share.png">
    
    
    <meta property="og:description" content="Jest and enzyme - writing javascript tests made easy with a painless framework and a helpful utility library.">
    
    <meta name="apple-mobile-web-app-title" content="Writing tests with jest and enzyme">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://seriousco.de/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://seriousco.de/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://seriousco.de/fonts/icon.eot?52m981');
        src: url('https://seriousco.de/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://seriousco.de/fonts/icon.woff?52m981')
               format('woff'),
             url('https://seriousco.de/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://seriousco.de/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://seriousco.de/stylesheets/application.css">
    <link rel="stylesheet" href="https://seriousco.de/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://seriousco.de/stylesheets/custom.css">
    <link rel="stylesheet" href="https://seriousco.de/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://seriousco.de/stylesheets/highlight/highlight.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://seriousco.de/stylesheets/magnific-popup.css">
    <link rel="stylesheet" href="https://seriousco.de/stylesheets/tooltipster.bundle.min.css">
    <link rel="stylesheet" href="https://seriousco.de/stylesheets/tooltipster-punk.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto&#43;Mono">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet">
    <style>
      body, input {
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
        letter-spacing: .8px;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="https://seriousco.de/css/contact_form.css">
    
    <link rel="stylesheet" href="https://seriousco.de/css/timeline.css">
    
    <link rel="stylesheet" href="https://seriousco.de/css/infocard.css">
    
    <link rel="stylesheet" href="https://seriousco.de/css/blog.css">
    
    <script src="https://seriousco.de/javascripts/modernizr.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://seriousco.de/javascripts/magnific-popup.js"></script>
    <script src="https://seriousco.de/javascripts/tooltipster.bundle.min.js"></script>
    <script src="https://seriousco.de/javascripts/emojione.min.js"></script>
    <script>
      function convertToEmojis() {
          emojione.imageType = 'svg';
          emojione.sprites = true;
          emojione.imagePathSVGSprites = '/images/emojione.sprites.svg';

          var wrapperElement = $('html body .article .wrapper');
          var original = wrapperElement.html();
          var converted = emojione.shortnameToImage(original);
          wrapperElement.html(converted);
      }

      $(document).ready(function() {
        convertToEmojis();

        $('.image-link').magnificPopup({
          type:'image',
          disableOn: 650,
          mainClass: 'mfp-with-zoom', 

          zoom: {
            enabled: true,
            duration: 300,
            easing: 'ease-in-out',
            opener: function(openerElement) {
              return openerElement.is('img') ? openerElement : openerElement.find('img');
            }
          }
        });
        $('.tooltip').tooltipster({
            theme: 'tooltipster-punk',
            trigger: 'click'
        });
      });
    </script>

    

  </head>
  <body class="palette-primary-light-blue palette-accent-deep-orange">




<div class="backdrop">
    <div class="backdrop-site"></div>
    <div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
    <div class="backdrop-header"></div>
<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        <span class="lg">It's all about the software.</span>
        <span class="sm">seriousco.de</span>
      </div>
    </div>

    <div class="button button-facebook" role="button" aria-label="Facebook">
      <a href="https://www.facebook.com/dominik.sumer" title="dominik.sumer on Facebook" target="_blank" class="toggle-button icon fa fa-facebook"></a>
    </div>

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/dsumer" title="@dsumer on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
      <a href="https://twitter.com/dominiksumer" title="@dominiksumer on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
    <div class="drawer">
        <nav aria-label="Navigation">
  <span class="project">
    <div class="banner">
    <div class="logo">
        <i class="fa fa-code fa-lg"></i>
    </div>
      <div class="name">
        <a href="https://seriousco.de/"><strong>seriousco.de </strong></a>
        <br>
        by <a href="https://github.com/dsumer" target="_blank" class="username">Dominik Sumer</a>
        
      </div>
    </div>
  </span>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    

<a title="About" href="/">
	<span class="fa fa-address-card"></span>
	About
</a>

  
</li>



<li>
  
    

<a title="Blog" href="/blog">
	<span class="fa fa-group"></span>
	Blog
</a>

  
</li>



<li>
  
    

<a title="Timeline (CV)" href="/timeline">
	<span class="fa fa-align-justify"></span>
	Timeline (CV)
</a>

  
</li>



<li>
  
    

<a title="Projects" href="/projects">
	<span class="fa fa-bookmark"></span>
	Projects
</a>

  
</li>



<li>
  
    

<a title="Contact" href="/contact">
	<span class="fa fa-address-book"></span>
	Contact
</a>

  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

    </div>

    <article class="article">
        <div class="wrapper">
            <div class="blogheader" style="background-image:url(https://seriousco.de/images/blog4.png)"></div>
            <h1>Writing tests with jest and enzyme </h1>
            <div class="bloginfo">
                By <a href="https://www.twitter.com/dominiksumer">@dominiksumer</a>
                <span class="date"><i class="fa fa-calendar"></i> 4. April 2017</span>
            </div>

            

<p>The last weeks I spent a lot time getting warm with <a href="https://facebook.github.io/react/">React</a> - Facebook’s JavaScript library  for building user interfaces. With React you can build rich applications using so-called “React Components”. You can either build an web application - or with React Native - build mobile apps and the components can also be pre-rendered on the server-side using Node for achieving a smooth user experience.</p>

<p>But the bigger your codebase grows, the more test-coverage you want to reach in order to build a stable application. This is where jest comes into the game and that’s what this blogpost is about: writing (unit-)tests with jest (and enzyme)!</p>

<h2 id="what-is-jest">What is jest?</h2>

<hr />

<p><a href="https://facebook.github.io/jest/">Jest</a> is a tool for easy and painless JavaScript testing. It is not React specific, so you can use it to test your whole js codebase. It comes with everything you need out of the box, just run jest and all your wishes come true! :wink:</p>

<h3 id="example">Example</h3>

<hr />

<p>Consider you have a simple ‘add’ method:</p>

<pre><code class="language-javascript">function add(a, b) {
  return a + b;
}

module.exports = add;
</code></pre>

<p>You want to test if it works as expected? No problem with jest:</p>

<pre><code class="language-javascript">const add = require('./add');
describe('add', () =&gt; {
  it('should add two numbers', () =&gt; {
    expect(add(1, 2)).toBe(3);
  });
});
</code></pre>

<p>So as you can see, it’s pretty simple and self-explaining. If you want to try it you can do this right here in your browser: <a href="https://repl.it/languages/jest">https://repl.it/languages/jest</a>
<br/><br/></p>

<h3 id="expecting-functions-to-be-called">Expecting functions to be called</h3>

<hr />

<p>Jest comes with a lot of helpful tools to write your tests. You can expect variables to be a specific value, fake timers, spy on functions - I don’t want to go into detail. But I want to show you one simple example: test if a specific function / callback gets called during your test case.</p>

<p>This is the function you want to test:</p>

<pre><code class="language-javascript">function calculate(giveFeedback, callback) {
  if (giveFeedback) {
    callback();
  }
}

module.exports = calculate;
</code></pre>

<p>Now you can test two things: if the giveFeedback parameter is true, callback should be called, if it is false nothing should happen. Here’s how you would test it with jest and make use of the jest.fn() mock function:</p>

<pre><code class="language-javascript">const calculate = require('./calculate');

describe('calculate', () =&gt; {
  it('should give feedback', () =&gt; {
    const callback = jest.fn();
    calculate(true, callback);
    expect(callback).toHaveBeenCalled();
  });
  
  it('should not give feedback', () =&gt; {
    const callback = jest.fn();
    calculate(false, callback);
    expect(callback).not.toHaveBeenCalled();
  });
});
</code></pre>

<hr />

<p><a class="image-link" href="/images/ij_2017.1.png" title="IntelliJ 2017.1">
    <img src='https://seriousco.de//images/ij_2017.1.png'
      class='center round-rectangle' 
    style=' width:600px; '/>
</a></p>

<p>As you might know, I am a pretty decent IntelliJ fanboy. It’s (in my opinion) the best IDE regarding web-development and just works smoothly without installing a bunch of plugins. Since version 2017.1 this also applies to developing, debugging and executing jest tests. Here you can see what’s new: <a href="https://www.youtube.com/watch?v=gfXTak1qexI">https://www.youtube.com/watch?v=gfXTak1qexI</a></p>

<h2 id="ok-you-also-talked-about-what-was-it-enzyme">Ok you also talked about - what was it - “enzyme”?</h2>

<hr />

<p><a class="image-link" href="/images/airbnb-logo.png" title="AirBnB">
    <img src='https://seriousco.de//images/airbnb-logo.png'
      class='center round-rectangle' 
    style=''/>
</a>
As jest is also powered by Facebook and they are using it to test their React-Components, it’s widely spread in the React Community. But jest doesn’t come with specific React helpers and this is what enzyme is for: providing you testing utilities for React.</p>

<h3 id="rendering-modes">Rendering Modes</h3>

<hr />

<p><a href="https://github.com/airbnb/enzyme">Enzyme</a> comes with three rendering modes to test your components:</p>

<ul>
<li><strong>shallow</strong>

<ul>
<li>renders the component onto a virtual dom and lets you test all basic features of your react component</li>
</ul></li>
<li><strong>mount</strong>

<ul>
<li>mounts the component onto a real dom node and lets you fully test your component including interactions with the DOM API or lifecycle hooks like componentDidMount</li>
</ul></li>
<li><strong>render</strong>

<ul>
<li>renders the component as static HTML which can be analyzed (you cannot interact with the component afterwards)</li>
</ul></li>
</ul>

<h3 id="wrapper-functionality">Wrapper functionality</h3>

<hr />

<p>Each of those rendering functions returns a wrapper which lets you interact with your component / the html output and analyze it. For example you can expect the HTML to equal a specific text:</p>

<pre><code class="language-javascript">function MyComponent(props) {
  return &lt;div&gt;test&lt;span class=”icon-star”&gt;&lt;/span&gt;&lt;/div&gt;;
}

const wrapper = shallow(&lt;MyComponent /&gt;);
expect(wrapper.text()).to.equal(‘test’);
</code></pre>

<p>You can expect or set the value of a specific prop:</p>

<pre><code class="language-javascript">const wrapper = mount(&lt;MyComponent bar=”baz” /&gt;);
expect(wrapper.props().bar).to.equal('baz');
wrapper.setProps({ bar: 'foo' });
expect(wrapper.props().bar).to.equal('foo');
</code></pre>

<p>Navigate to your component’s DOM with css selectors:</p>

<pre><code class="language-javascript">const wrapper = mount(&lt;MyComponent bar=”baz” /&gt;);
expect(wrapper.find(‘.icon-star’).type()).to.equal(‘span’);
</code></pre>

<p>Simulate Events
Simulating (DOM) events? No problem with enzyme! Here’s an example how you can simulate a simple button click:</p>

<pre><code class="language-javascript">function MyComponent(props) {
  return &lt;div&gt;&lt;button onClick={props.onButtonClick}&gt;ClickMe&lt;/button&gt;&lt;/div&gt;;
}

const mockOnClick = jest.fn();
const wrapper = mount(&lt;MyComponent onButtonClick={mockOnClick} /&gt;);
wrapper.find(‘button’).simulate(‘click’);
expect(mockOnClick).toHaveBeenCalled();
</code></pre>

<hr />

<p>This was a basic overview about jest and the react test utility library enzyme.
Do you have any questions? Don’t hesitate to <a href="/contact">contact me</a>! :smile:</p>


            <div id="disqus_thread" style="margin-top: 70px;"></div>
<script type="text/javascript">

    (function() {
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'seriouscode';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
        </div>

        <aside class="copyright" role="note" style="margin: 10px 0 0 0;">
            
            Website built with <a href="https://github.com/Monterra/seriousco.de" class="fa fa-heart"></a>️ and
            <a href="https://www.gohugo.io" target="_blank">Hugo</a>
            using the
            <a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
        </aside>
    </article>

    <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
            <div class="wrapper">
                <div class="meta"></div>
                <div class="list"></div>
            </div>
        </div>
    </div>
</main>

<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5866319641494442"></script>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://seriousco.de/javascripts/application.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.13/clipboard.min.js"></script>
    <script src="https://seriousco.de/javascripts/main.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }
      }

      /* Add permanent link next to the headers */
      var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

      for(var i = 0; i < headers.length; i++) {
          var a = document.createElement("a");
          a.setAttribute("class", "headerlink");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", "Permanent link")
          a.innerHTML = "#";
          headers[i].appendChild(a);
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-89538420-1', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="https://seriousco.de/javascripts/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
